{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Adem Macic\\\\Desktop\\\\movie-app(valens task)\\\\src\\\\store\\\\MoviesProvider.js\",\n  _s = $RefreshSig$();\nimport { useReducer } from \"react\";\nimport MoviesContext from \"./movies-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\nconst defaultMoviesState = {\n  top10Movies: [],\n  searchedMovies: []\n};\nconst moviesReducer = (state, action) => {\n  if (action.type === \"SHOWTOP10\") {}\n  if (action.type === \"SHOWSEARCHED\") {\n    return action.updatedState;\n  }\n  return state;\n};\nconst MoviesProvider = props => {\n  _s();\n  const [moviesState, dispatchMoviesAction] = useReducer(moviesReducer, defaultMoviesState);\n  const findTop10MoviesHandler = () => {\n    console.log();\n    dispatchMoviesAction({\n      type: \"SHOWTOP10\"\n    });\n  };\n  const findSearchedMoviesHandler = query => {\n    console.log(\"NADJEEME\");\n    fetch(`${API_URL}&type=movie&s=${query}`).then(response => {\n      if (!response.ok) {\n        throw new Error(\"NE VALJA BRUDA\");\n      } else {\n        return response.json();\n      }\n    }).then(data => {\n      console.log(data.Search);\n      if (data.Search) {\n        const updatedState = {\n          ...state,\n          searchedMovies: data.Search\n        };\n        console.log(updatedState);\n        dispatchMoviesAction({\n          type: \"SHOWSEARCHED\",\n          updatedState\n        });\n      } else {\n        const updatedState = {\n          ...state,\n          searchedMovies: []\n        };\n        dispatchMoviesAction({\n          type: \"SHOWSEARCHED\",\n          updatedState\n        });\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n    //dispatchMoviesAction({ type: \"SHOWSEARCHED\", query });\n  };\n\n  const moviesContext = {\n    top10Movies: moviesState.top10Movies,\n    searchedMovies: moviesState.searchedMovies,\n    findTop10Movies: findTop10MoviesHandler,\n    findSearchedMovies: findSearchedMoviesHandler\n  };\n  return /*#__PURE__*/_jsxDEV(MoviesContext.Provider, {\n    value: moviesContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(MoviesProvider, \"U5m/+vlkt5YqmEKXQNj+gOxKhoU=\");\n_c = MoviesProvider;\nexport default MoviesProvider;\nvar _c;\n$RefreshReg$(_c, \"MoviesProvider\");","map":{"version":3,"names":["useReducer","MoviesContext","API_URL","defaultMoviesState","top10Movies","searchedMovies","moviesReducer","state","action","type","updatedState","MoviesProvider","props","moviesState","dispatchMoviesAction","findTop10MoviesHandler","console","log","findSearchedMoviesHandler","query","fetch","then","response","ok","Error","json","data","Search","catch","error","moviesContext","findTop10Movies","findSearchedMovies","children"],"sources":["C:/Users/Adem Macic/Desktop/movie-app(valens task)/src/store/MoviesProvider.js"],"sourcesContent":["import { useReducer } from \"react\";\r\nimport MoviesContext from \"./movies-context\";\r\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\r\n\r\nconst defaultMoviesState = {\r\n  top10Movies: [],\r\n  searchedMovies: [],\r\n};\r\n\r\nconst moviesReducer = (state, action) => {\r\n  if (action.type === \"SHOWTOP10\") {\r\n  }\r\n  if (action.type === \"SHOWSEARCHED\") {\r\n    return action.updatedState;\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst MoviesProvider = (props) => {\r\n  const [moviesState, dispatchMoviesAction] = useReducer(\r\n    moviesReducer,\r\n    defaultMoviesState\r\n  );\r\n\r\n  const findTop10MoviesHandler = () => {\r\n    console.log();\r\n    dispatchMoviesAction({ type: \"SHOWTOP10\" });\r\n  };\r\n\r\n  const findSearchedMoviesHandler = (query) => {\r\n    console.log(\"NADJEEME\");\r\n    fetch(`${API_URL}&type=movie&s=${query}`)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"NE VALJA BRUDA\");\r\n        } else {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        console.log(data.Search);\r\n        if (data.Search) {\r\n          const updatedState = { ...state, searchedMovies: data.Search };\r\n          console.log(updatedState);\r\n          dispatchMoviesAction({type: \"SHOWSEARCHED\", updatedState})\r\n        } else {\r\n          const updatedState = { ...state, searchedMovies: [] };\r\n          dispatchMoviesAction({type: \"SHOWSEARCHED\", updatedState})\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n    //dispatchMoviesAction({ type: \"SHOWSEARCHED\", query });\r\n  };\r\n\r\n  const moviesContext = {\r\n    top10Movies: moviesState.top10Movies,\r\n    searchedMovies: moviesState.searchedMovies,\r\n    findTop10Movies: findTop10MoviesHandler,\r\n    findSearchedMovies: findSearchedMoviesHandler,\r\n  };\r\n\r\n  return (\r\n    <MoviesContext.Provider value={moviesContext}>\r\n      {props.children}\r\n    </MoviesContext.Provider>\r\n  );\r\n};\r\nexport default MoviesProvider;\r\n"],"mappings":";;AAAA,SAASA,UAAU,QAAQ,OAAO;AAClC,OAAOC,aAAa,MAAM,kBAAkB;AAAC;AAC7C,MAAMC,OAAO,GAAG,yCAAyC;AAEzD,MAAMC,kBAAkB,GAAG;EACzBC,WAAW,EAAE,EAAE;EACfC,cAAc,EAAE;AAClB,CAAC;AAED,MAAMC,aAAa,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACvC,IAAIA,MAAM,CAACC,IAAI,KAAK,WAAW,EAAE,CACjC;EACA,IAAID,MAAM,CAACC,IAAI,KAAK,cAAc,EAAE;IAClC,OAAOD,MAAM,CAACE,YAAY;EAC5B;EAEA,OAAOH,KAAK;AACd,CAAC;AAED,MAAMI,cAAc,GAAIC,KAAK,IAAK;EAAA;EAChC,MAAM,CAACC,WAAW,EAAEC,oBAAoB,CAAC,GAAGd,UAAU,CACpDM,aAAa,EACbH,kBAAkB,CACnB;EAED,MAAMY,sBAAsB,GAAG,MAAM;IACnCC,OAAO,CAACC,GAAG,EAAE;IACbH,oBAAoB,CAAC;MAAEL,IAAI,EAAE;IAAY,CAAC,CAAC;EAC7C,CAAC;EAED,MAAMS,yBAAyB,GAAIC,KAAK,IAAK;IAC3CH,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;IACvBG,KAAK,CAAE,GAAElB,OAAQ,iBAAgBiB,KAAM,EAAC,CAAC,CACtCE,IAAI,CAAEC,QAAQ,IAAK;MAClB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;MACnC,CAAC,MAAM;QACL,OAAOF,QAAQ,CAACG,IAAI,EAAE;MACxB;IACF,CAAC,CAAC,CACDJ,IAAI,CAAEK,IAAI,IAAK;MACdV,OAAO,CAACC,GAAG,CAACS,IAAI,CAACC,MAAM,CAAC;MACxB,IAAID,IAAI,CAACC,MAAM,EAAE;QACf,MAAMjB,YAAY,GAAG;UAAE,GAAGH,KAAK;UAAEF,cAAc,EAAEqB,IAAI,CAACC;QAAO,CAAC;QAC9DX,OAAO,CAACC,GAAG,CAACP,YAAY,CAAC;QACzBI,oBAAoB,CAAC;UAACL,IAAI,EAAE,cAAc;UAAEC;QAAY,CAAC,CAAC;MAC5D,CAAC,MAAM;QACL,MAAMA,YAAY,GAAG;UAAE,GAAGH,KAAK;UAAEF,cAAc,EAAE;QAAG,CAAC;QACrDS,oBAAoB,CAAC;UAACL,IAAI,EAAE,cAAc;UAAEC;QAAY,CAAC,CAAC;MAC5D;IACF,CAAC,CAAC,CACDkB,KAAK,CAAEC,KAAK,IAAK;MAChBb,OAAO,CAACa,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;IACJ;EACF,CAAC;;EAED,MAAMC,aAAa,GAAG;IACpB1B,WAAW,EAAES,WAAW,CAACT,WAAW;IACpCC,cAAc,EAAEQ,WAAW,CAACR,cAAc;IAC1C0B,eAAe,EAAEhB,sBAAsB;IACvCiB,kBAAkB,EAAEd;EACtB,CAAC;EAED,oBACE,QAAC,aAAa,CAAC,QAAQ;IAAC,KAAK,EAAEY,aAAc;IAAA,UAC1ClB,KAAK,CAACqB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACQ;AAE7B,CAAC;AAAC,GAlDItB,cAAc;AAAA,KAAdA,cAAc;AAmDpB,eAAeA,cAAc;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}