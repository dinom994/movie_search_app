{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Adem Macic\\\\Desktop\\\\movie-app(valens task)\\\\src\\\\store\\\\MoviesProvider.js\",\n  _s = $RefreshSig$();\nimport { useReducer } from \"react\";\nimport MoviesContext from \"./movies-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\nconst defaultMoviesState = {\n  top10Movies: [],\n  searchedMovies: []\n};\nconst moviesReducer = (state, action) => {\n  if (action.type === \"SHOWTOP10\") {}\n  if (action.type === \"SHOWSEARCHED\") {\n    fetch(`${API_URL}&type=$movie&s=${action.query}`).then(response => {\n      if (!response.ok) {\n        throw new Error(\"NE VALJA BRUDA\");\n      } else {\n        return response.json();\n      }\n    }).then(data => {\n      if (data.Search) {\n        const updatedState = {\n          ...state,\n          searchedMovies: data.Search\n        };\n        return updatedState;\n      } else {\n        const updatedState = {\n          ...state,\n          searchedMovies: []\n        };\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  /*{\r\n    const response = await fetch(`${API_URL}&type=${props.type}&s=${title}`);\r\n    // const response = await fetch(\r\n    //   `${API_URL}&type=${props.type}&s=&r=json&v=1page=1sort=imdbRating&order=desc`\r\n    // );\r\n    if (!response.ok) {\r\n      throw new Error(\"NE VALJA BRUDA\");\r\n    } else {\r\n      const data = await response.json();\r\n    }\r\n    if (data.Search) {\r\n      const updatedState = {...data.Search}\r\n    } else {\r\n      state.searchedMovies=[];\r\n    }\r\n  }*/\n  return state;\n};\nconst MoviesProvider = props => {\n  _s();\n  const [moviesState, dispatchMoviesAction] = useReducer(moviesReducer, defaultMoviesState);\n  const findTop10MoviesHandler = () => {\n    dispatchMoviesAction({\n      type: \"SHOWTOP10\"\n    });\n  };\n  const findSearchedMoviesHandler = () => {\n    dispatchMoviesAction({\n      type: \"SHOWSEARCHED\",\n      query: props.query\n    });\n  };\n  const moviesContext = {\n    top10Movies: moviesState.top10Movies,\n    searchedMovies: moviesState.searchedMovies,\n    findTop10Movies: findTop10MoviesHandler,\n    findSearchedMovies: findSearchedMoviesHandler\n  };\n  return /*#__PURE__*/_jsxDEV(MoviesContext.Provider, {\n    value: moviesContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(MoviesProvider, \"U5m/+vlkt5YqmEKXQNj+gOxKhoU=\");\n_c = MoviesProvider;\nexport default MoviesProvider;\nvar _c;\n$RefreshReg$(_c, \"MoviesProvider\");","map":{"version":3,"names":["useReducer","MoviesContext","API_URL","defaultMoviesState","top10Movies","searchedMovies","moviesReducer","state","action","type","fetch","query","then","response","ok","Error","json","data","Search","updatedState","catch","error","console","MoviesProvider","props","moviesState","dispatchMoviesAction","findTop10MoviesHandler","findSearchedMoviesHandler","moviesContext","findTop10Movies","findSearchedMovies","children"],"sources":["C:/Users/Adem Macic/Desktop/movie-app(valens task)/src/store/MoviesProvider.js"],"sourcesContent":["import { useReducer } from \"react\";\r\nimport MoviesContext from \"./movies-context\";\r\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\r\n\r\nconst defaultMoviesState = {\r\n  top10Movies: [],\r\n  searchedMovies: [],\r\n};\r\n\r\nconst moviesReducer = (state, action) => {\r\n  if (action.type === \"SHOWTOP10\") {\r\n  }\r\n  if (action.type === \"SHOWSEARCHED\") {\r\n    fetch(`${API_URL}&type=$movie&s=${action.query}`)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"NE VALJA BRUDA\");\r\n        } else {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        if (data.Search) {\r\n          const updatedState = { ...state, searchedMovies: data.Search };\r\n          return updatedState;\r\n        } else {\r\n          const updatedState = { ...state, searchedMovies: [] };\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  }\r\n\r\n  /*{\r\n    const response = await fetch(`${API_URL}&type=${props.type}&s=${title}`);\r\n    // const response = await fetch(\r\n    //   `${API_URL}&type=${props.type}&s=&r=json&v=1page=1sort=imdbRating&order=desc`\r\n    // );\r\n    if (!response.ok) {\r\n      throw new Error(\"NE VALJA BRUDA\");\r\n    } else {\r\n      const data = await response.json();\r\n    }\r\n    if (data.Search) {\r\n      const updatedState = {...data.Search}\r\n    } else {\r\n      state.searchedMovies=[];\r\n    }\r\n  }*/\r\n  return state;\r\n};\r\n\r\nconst MoviesProvider = (props) => {\r\n  const [moviesState, dispatchMoviesAction] = useReducer(\r\n    moviesReducer,\r\n    defaultMoviesState\r\n  );\r\n\r\n  const findTop10MoviesHandler = () => {\r\n    dispatchMoviesAction({ type: \"SHOWTOP10\" });\r\n  };\r\n\r\n  const findSearchedMoviesHandler = () => {\r\n    dispatchMoviesAction({ type: \"SHOWSEARCHED\", query: props.query });\r\n  };\r\n\r\n  const moviesContext = {\r\n    top10Movies: moviesState.top10Movies,\r\n    searchedMovies: moviesState.searchedMovies,\r\n    findTop10Movies: findTop10MoviesHandler,\r\n    findSearchedMovies: findSearchedMoviesHandler,\r\n  };\r\n\r\n  return (\r\n    <MoviesContext.Provider value={moviesContext}>\r\n      {props.children}\r\n    </MoviesContext.Provider>\r\n  );\r\n};\r\nexport default MoviesProvider;\r\n"],"mappings":";;AAAA,SAASA,UAAU,QAAQ,OAAO;AAClC,OAAOC,aAAa,MAAM,kBAAkB;AAAC;AAC7C,MAAMC,OAAO,GAAG,yCAAyC;AAEzD,MAAMC,kBAAkB,GAAG;EACzBC,WAAW,EAAE,EAAE;EACfC,cAAc,EAAE;AAClB,CAAC;AAED,MAAMC,aAAa,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACvC,IAAIA,MAAM,CAACC,IAAI,KAAK,WAAW,EAAE,CACjC;EACA,IAAID,MAAM,CAACC,IAAI,KAAK,cAAc,EAAE;IAClCC,KAAK,CAAE,GAAER,OAAQ,kBAAiBM,MAAM,CAACG,KAAM,EAAC,CAAC,CAC9CC,IAAI,CAAEC,QAAQ,IAAK;MAClB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;MACnC,CAAC,MAAM;QACL,OAAOF,QAAQ,CAACG,IAAI,EAAE;MACxB;IACF,CAAC,CAAC,CACDJ,IAAI,CAAEK,IAAI,IAAK;MACd,IAAIA,IAAI,CAACC,MAAM,EAAE;QACf,MAAMC,YAAY,GAAG;UAAE,GAAGZ,KAAK;UAAEF,cAAc,EAAEY,IAAI,CAACC;QAAO,CAAC;QAC9D,OAAOC,YAAY;MACrB,CAAC,MAAM;QACL,MAAMA,YAAY,GAAG;UAAE,GAAGZ,KAAK;UAAEF,cAAc,EAAE;QAAG,CAAC;MACvD;IACF,CAAC,CAAC,CACDe,KAAK,CAAEC,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EACN;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,OAAOd,KAAK;AACd,CAAC;AAED,MAAMgB,cAAc,GAAIC,KAAK,IAAK;EAAA;EAChC,MAAM,CAACC,WAAW,EAAEC,oBAAoB,CAAC,GAAG1B,UAAU,CACpDM,aAAa,EACbH,kBAAkB,CACnB;EAED,MAAMwB,sBAAsB,GAAG,MAAM;IACnCD,oBAAoB,CAAC;MAAEjB,IAAI,EAAE;IAAY,CAAC,CAAC;EAC7C,CAAC;EAED,MAAMmB,yBAAyB,GAAG,MAAM;IACtCF,oBAAoB,CAAC;MAAEjB,IAAI,EAAE,cAAc;MAAEE,KAAK,EAAEa,KAAK,CAACb;IAAM,CAAC,CAAC;EACpE,CAAC;EAED,MAAMkB,aAAa,GAAG;IACpBzB,WAAW,EAAEqB,WAAW,CAACrB,WAAW;IACpCC,cAAc,EAAEoB,WAAW,CAACpB,cAAc;IAC1CyB,eAAe,EAAEH,sBAAsB;IACvCI,kBAAkB,EAAEH;EACtB,CAAC;EAED,oBACE,QAAC,aAAa,CAAC,QAAQ;IAAC,KAAK,EAAEC,aAAc;IAAA,UAC1CL,KAAK,CAACQ;EAAQ;IAAA;IAAA;IAAA;EAAA,QACQ;AAE7B,CAAC;AAAC,GA1BIT,cAAc;AAAA,KAAdA,cAAc;AA2BpB,eAAeA,cAAc;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}