{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Adem Macic\\\\Desktop\\\\movie-app(valens task)\\\\src\\\\store\\\\ShowsProvider.js\",\n  _s = $RefreshSig$();\nimport ShowsContext from \"./shows-context\";\nimport { useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\nconst defaultShowsState = {\n  top10Shows: [],\n  searchedShows: []\n};\nconst showsReducer = (state, action) => {\n  if (action.type === \"SHOWTOP10\") {}\n  if (action.type === \"SHOWSEARCHED\") {\n    return action.updatedState;\n  }\n  return state;\n};\nconst ShowsProvider = props => {\n  _s();\n  const [showsState, dispatchShowsAction] = useReducer(showsReducer, defaultShowsState);\n  const findTop10ShowsHandler = () => {\n    dispatchShowsAction({\n      type: \"SHOWTOP10\"\n    });\n  };\n  const findSearchedShowsHandler = query => {\n    fetch(`${API_URL}&type=series&s=${query}`).then(response => {\n      if (!response.ok) {\n        throw new Error(\"NE VALJA BRUDA\");\n      } else {\n        return response.json();\n      }\n    }).then(data => {\n      //console.log(data.Search);\n      if (data.Search) {\n        const updatedState = {\n          ...showsState,\n          searchedShows: data.Search\n        };\n        //console.log(updatedState);\n        dispatchShowsAction({\n          type: \"SHOWSEARCHED\",\n          updatedState\n        });\n      } else {\n        const updatedState = {\n          ...showsState,\n          searchedShows: []\n        };\n        dispatchShowsAction({\n          type: \"SHOWSEARCHED\",\n          updatedState\n        });\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n  const showsContext = {\n    top10Shows: showsState.top10Shows,\n    searchedShows: showsState.searchedShows,\n    findTop10Shows: findTop10ShowsHandler,\n    findSearchedShows: findSearchedShowsHandler\n  };\n  return /*#__PURE__*/_jsxDEV(ShowsContext.Provider, {\n    value: showsContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(ShowsProvider, \"Xec/gLqJqcgrUV4CEcx1z65uYg4=\");\n_c = ShowsProvider;\nexport default ShowsProvider;\nvar _c;\n$RefreshReg$(_c, \"ShowsProvider\");","map":{"version":3,"names":["ShowsContext","useReducer","API_URL","defaultShowsState","top10Shows","searchedShows","showsReducer","state","action","type","updatedState","ShowsProvider","props","showsState","dispatchShowsAction","findTop10ShowsHandler","findSearchedShowsHandler","query","fetch","then","response","ok","Error","json","data","Search","catch","error","console","showsContext","findTop10Shows","findSearchedShows","children"],"sources":["C:/Users/Adem Macic/Desktop/movie-app(valens task)/src/store/ShowsProvider.js"],"sourcesContent":["import ShowsContext from \"./shows-context\";\r\nimport { useReducer } from \"react\";\r\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\r\n\r\nconst defaultShowsState = {\r\n  top10Shows: [],\r\n  searchedShows: [],\r\n};\r\n\r\nconst showsReducer = (state, action) => {\r\n  if (action.type === \"SHOWTOP10\") {\r\n  }\r\n  if (action.type === \"SHOWSEARCHED\") {\r\n    return action.updatedState;\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst ShowsProvider = (props) => {\r\n  const [showsState, dispatchShowsAction] = useReducer(\r\n    showsReducer,\r\n    defaultShowsState\r\n  );\r\n\r\n  const findTop10ShowsHandler = () => {\r\n    dispatchShowsAction({ type: \"SHOWTOP10\" });\r\n  };\r\n\r\n  const findSearchedShowsHandler = (query) => {\r\n    fetch(`${API_URL}&type=series&s=${query}`)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"NE VALJA BRUDA\");\r\n        } else {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        //console.log(data.Search);\r\n        if (data.Search) {\r\n          const updatedState = { ...showsState, searchedShows: data.Search };\r\n          //console.log(updatedState);\r\n          dispatchShowsAction({type: \"SHOWSEARCHED\", updatedState})\r\n        } else {\r\n          const updatedState = { ...showsState, searchedShows: [] };\r\n          dispatchShowsAction({type: \"SHOWSEARCHED\", updatedState})\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  const showsContext = {\r\n    top10Shows: showsState.top10Shows,\r\n    searchedShows: showsState.searchedShows,\r\n    findTop10Shows: findTop10ShowsHandler,\r\n    findSearchedShows: findSearchedShowsHandler,\r\n  };\r\n\r\n  return (\r\n    <ShowsContext.Provider value={showsContext}>\r\n      {props.children}\r\n    </ShowsContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ShowsProvider;\r\n"],"mappings":";;AAAA,OAAOA,YAAY,MAAM,iBAAiB;AAC1C,SAASC,UAAU,QAAQ,OAAO;AAAC;AACnC,MAAMC,OAAO,GAAG,yCAAyC;AAEzD,MAAMC,iBAAiB,GAAG;EACxBC,UAAU,EAAE,EAAE;EACdC,aAAa,EAAE;AACjB,CAAC;AAED,MAAMC,YAAY,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACtC,IAAIA,MAAM,CAACC,IAAI,KAAK,WAAW,EAAE,CACjC;EACA,IAAID,MAAM,CAACC,IAAI,KAAK,cAAc,EAAE;IAClC,OAAOD,MAAM,CAACE,YAAY;EAC5B;EAEA,OAAOH,KAAK;AACd,CAAC;AAED,MAAMI,aAAa,GAAIC,KAAK,IAAK;EAAA;EAC/B,MAAM,CAACC,UAAU,EAAEC,mBAAmB,CAAC,GAAGb,UAAU,CAClDK,YAAY,EACZH,iBAAiB,CAClB;EAED,MAAMY,qBAAqB,GAAG,MAAM;IAClCD,mBAAmB,CAAC;MAAEL,IAAI,EAAE;IAAY,CAAC,CAAC;EAC5C,CAAC;EAED,MAAMO,wBAAwB,GAAIC,KAAK,IAAK;IAC1CC,KAAK,CAAE,GAAEhB,OAAQ,kBAAiBe,KAAM,EAAC,CAAC,CACvCE,IAAI,CAAEC,QAAQ,IAAK;MAClB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;MACnC,CAAC,MAAM;QACL,OAAOF,QAAQ,CAACG,IAAI,EAAE;MACxB;IACF,CAAC,CAAC,CACDJ,IAAI,CAAEK,IAAI,IAAK;MACd;MACA,IAAIA,IAAI,CAACC,MAAM,EAAE;QACf,MAAMf,YAAY,GAAG;UAAE,GAAGG,UAAU;UAAER,aAAa,EAAEmB,IAAI,CAACC;QAAO,CAAC;QAClE;QACAX,mBAAmB,CAAC;UAACL,IAAI,EAAE,cAAc;UAAEC;QAAY,CAAC,CAAC;MAC3D,CAAC,MAAM;QACL,MAAMA,YAAY,GAAG;UAAE,GAAGG,UAAU;UAAER,aAAa,EAAE;QAAG,CAAC;QACzDS,mBAAmB,CAAC;UAACL,IAAI,EAAE,cAAc;UAAEC;QAAY,CAAC,CAAC;MAC3D;IACF,CAAC,CAAC,CACDgB,KAAK,CAAEC,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EACN,CAAC;EAED,MAAME,YAAY,GAAG;IACnBzB,UAAU,EAAES,UAAU,CAACT,UAAU;IACjCC,aAAa,EAAEQ,UAAU,CAACR,aAAa;IACvCyB,cAAc,EAAEf,qBAAqB;IACrCgB,iBAAiB,EAAEf;EACrB,CAAC;EAED,oBACE,QAAC,YAAY,CAAC,QAAQ;IAAC,KAAK,EAAEa,YAAa;IAAA,UACxCjB,KAAK,CAACoB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACO;AAE5B,CAAC;AAAC,GA/CIrB,aAAa;AAAA,KAAbA,aAAa;AAiDnB,eAAeA,aAAa;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}