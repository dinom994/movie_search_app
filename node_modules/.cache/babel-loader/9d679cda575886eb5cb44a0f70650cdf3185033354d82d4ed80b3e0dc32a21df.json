{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Adem Macic\\\\Desktop\\\\movie-app(valens task)\\\\src\\\\store\\\\MoviesProvider.js\",\n  _s = $RefreshSig$();\nimport { useReducer } from \"react\";\nimport MoviesContext from \"./movies-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\nconst defaultMoviesState = {\n  searchedMovies: []\n};\nconst moviesReducer = (state, action) => {\n  if (action.type === \"SHOWSEARCHED\") {\n    return action.updatedState;\n  }\n  return state;\n};\nconst MoviesProvider = props => {\n  _s();\n  const [moviesState, dispatchMoviesAction] = useReducer(moviesReducer, defaultMoviesState);\n  const findSearchedMoviesHandler = query => {\n    fetch(`${API_URL}&type=movie&s=${query}`).then(response => {\n      if (!response.ok) {\n        throw new Error(\"NE VALJA BRUDA\");\n      } else {\n        return response.json();\n      }\n    }).then(data => {\n      if (data.Search) {\n        const updatedState = {\n          ...moviesState,\n          searchedMovies: data.Search\n        };\n        dispatchMoviesAction({\n          type: \"SHOWSEARCHED\",\n          updatedState\n        });\n      } else {\n        const updatedState = {\n          ...moviesState,\n          searchedMovies: []\n        };\n        dispatchMoviesAction({\n          type: \"SHOWSEARCHED\",\n          updatedState\n        });\n      }\n    }).catch(error => {\n      console.error(error);\n    });\n    //dispatchMoviesAction({ type: \"SHOWSEARCHED\", query });\n  };\n\n  const moviesContext = {\n    searchedMovies: moviesState.searchedMovies,\n    findSearchedMovies: findSearchedMoviesHandler\n  };\n  return /*#__PURE__*/_jsxDEV(MoviesContext.Provider, {\n    value: moviesContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(MoviesProvider, \"U5m/+vlkt5YqmEKXQNj+gOxKhoU=\");\n_c = MoviesProvider;\nexport default MoviesProvider;\nvar _c;\n$RefreshReg$(_c, \"MoviesProvider\");","map":{"version":3,"names":["useReducer","MoviesContext","API_URL","defaultMoviesState","searchedMovies","moviesReducer","state","action","type","updatedState","MoviesProvider","props","moviesState","dispatchMoviesAction","findSearchedMoviesHandler","query","fetch","then","response","ok","Error","json","data","Search","catch","error","console","moviesContext","findSearchedMovies","children"],"sources":["C:/Users/Adem Macic/Desktop/movie-app(valens task)/src/store/MoviesProvider.js"],"sourcesContent":["import { useReducer } from \"react\";\r\nimport MoviesContext from \"./movies-context\";\r\nconst API_URL = \"http://www.omdbapi.com/?apikey=f51ddc1a\";\r\n\r\nconst defaultMoviesState = {\r\n  searchedMovies: [],\r\n};\r\n\r\nconst moviesReducer = (state, action) => {\r\n  if (action.type === \"SHOWSEARCHED\") {\r\n    return action.updatedState;\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst MoviesProvider = (props) => {\r\n  const [moviesState, dispatchMoviesAction] = useReducer(\r\n    moviesReducer,\r\n    defaultMoviesState\r\n  );\r\n\r\n  const findSearchedMoviesHandler = (query) => {\r\n    \r\n    fetch(`${API_URL}&type=movie&s=${query}`)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"NE VALJA BRUDA\");\r\n        } else {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        if (data.Search) {\r\n          const updatedState = { ...moviesState, searchedMovies: data.Search };\r\n          dispatchMoviesAction({type: \"SHOWSEARCHED\", updatedState})\r\n        } else {\r\n          const updatedState = { ...moviesState, searchedMovies: [] };\r\n          dispatchMoviesAction({type: \"SHOWSEARCHED\", updatedState})\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n    //dispatchMoviesAction({ type: \"SHOWSEARCHED\", query });\r\n  };\r\n\r\n  const moviesContext = {\r\n    searchedMovies: moviesState.searchedMovies,\r\n    findSearchedMovies: findSearchedMoviesHandler,\r\n  };\r\n\r\n  return (\r\n    <MoviesContext.Provider value={moviesContext}>\r\n      {props.children}\r\n    </MoviesContext.Provider>\r\n  );\r\n};\r\nexport default MoviesProvider;\r\n"],"mappings":";;AAAA,SAASA,UAAU,QAAQ,OAAO;AAClC,OAAOC,aAAa,MAAM,kBAAkB;AAAC;AAC7C,MAAMC,OAAO,GAAG,yCAAyC;AAEzD,MAAMC,kBAAkB,GAAG;EACzBC,cAAc,EAAE;AAClB,CAAC;AAED,MAAMC,aAAa,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACvC,IAAIA,MAAM,CAACC,IAAI,KAAK,cAAc,EAAE;IAClC,OAAOD,MAAM,CAACE,YAAY;EAC5B;EAEA,OAAOH,KAAK;AACd,CAAC;AAED,MAAMI,cAAc,GAAIC,KAAK,IAAK;EAAA;EAChC,MAAM,CAACC,WAAW,EAAEC,oBAAoB,CAAC,GAAGb,UAAU,CACpDK,aAAa,EACbF,kBAAkB,CACnB;EAED,MAAMW,yBAAyB,GAAIC,KAAK,IAAK;IAE3CC,KAAK,CAAE,GAAEd,OAAQ,iBAAgBa,KAAM,EAAC,CAAC,CACtCE,IAAI,CAAEC,QAAQ,IAAK;MAClB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,gBAAgB,CAAC;MACnC,CAAC,MAAM;QACL,OAAOF,QAAQ,CAACG,IAAI,EAAE;MACxB;IACF,CAAC,CAAC,CACDJ,IAAI,CAAEK,IAAI,IAAK;MACd,IAAIA,IAAI,CAACC,MAAM,EAAE;QACf,MAAMd,YAAY,GAAG;UAAE,GAAGG,WAAW;UAAER,cAAc,EAAEkB,IAAI,CAACC;QAAO,CAAC;QACpEV,oBAAoB,CAAC;UAACL,IAAI,EAAE,cAAc;UAAEC;QAAY,CAAC,CAAC;MAC5D,CAAC,MAAM;QACL,MAAMA,YAAY,GAAG;UAAE,GAAGG,WAAW;UAAER,cAAc,EAAE;QAAG,CAAC;QAC3DS,oBAAoB,CAAC;UAACL,IAAI,EAAE,cAAc;UAAEC;QAAY,CAAC,CAAC;MAC5D;IACF,CAAC,CAAC,CACDe,KAAK,CAAEC,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;IACJ;EACF,CAAC;;EAED,MAAME,aAAa,GAAG;IACpBvB,cAAc,EAAEQ,WAAW,CAACR,cAAc;IAC1CwB,kBAAkB,EAAEd;EACtB,CAAC;EAED,oBACE,QAAC,aAAa,CAAC,QAAQ;IAAC,KAAK,EAAEa,aAAc;IAAA,UAC1ChB,KAAK,CAACkB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACQ;AAE7B,CAAC;AAAC,GAzCInB,cAAc;AAAA,KAAdA,cAAc;AA0CpB,eAAeA,cAAc;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}